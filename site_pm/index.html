<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PM - Donut global</title>
  <link rel="stylesheet" href="style.css" />
  <style> 
    </style>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
</head>
<body>
  
<header class="topbar">
    <div class="brand">
    <h1>SAE15</h1>
  </div>

  <nav class="quick"><a class="active" href="index.html">Page d'accueil</a>
<a class="" href="agents.html">Agents de police</a>
<a class="" href="asvp.html">ASVP</a>
<a class="" href="gardes.html">Gardes champêtres</a>
<a class="" href="maitres.html">Maîtres-chiens</a>
<a class="" href="chiens.html">Chiens de police</a></nav>
</header>
<div class="overlay" id="overlay" onclick="closeMenu()"></div>
<aside class="menu" id="menu"><a class="active" href="index.html">Page d'accueil</a>
<a class="" href="agents.html">Agents de police</a>
<a class="" href="asvp.html">ASVP</a>
<a class="" href="gardes.html">Gardes champêtres</a>
<a class="" href="maitres.html">Maîtres-chiens</a>
<a class="" href="chiens.html">Chiens de police</a></aside>

  <main class="content">
 <section class="bloc">
  <h3>Traitement de donnée</h3>
  <p class="muted"> Ce site web est dédié à un projet à faire , qui consiste à traiter de grande données stocké dans un fichier .csv . <br> En l'occurence , nous avons choisi d'étudier sur les effectifs de police par département , et par spécialité aussi .</a></p>
</section>

<section class="bloc">
  <h3>Graphe permettant de voir le pourcentage des spécialités ;</h3>
    <p class="muted">Mettez le curseur sur chaque bout du graphe afin de voir son pourcentage.</p>


  <div class="grid">
    <figure class="card">
      <figcaption>Répartition</figcaption>
      <div id="donut_global" class="chart" style="width:100%;min-height:420px;"></div>
    </figure>
    
    <div class="bloc-texte-droite">
      <p> Ce graphe , aussi appelé "donuts" permet de visualiser les inégalités <br>entre les différentes spécialités . <br> 
    Nous remarquons que les Agents de police sont maojoritaire , <br>ce qui est normal car c'est le status de base ,<br> toute autorité prend ce status<br>
    Or , les gardes champêtre ou les maîtres-chien ,<br>sont en inferiorité par rapport à la ASVP . </p>
      </div>
  </div>
</section>
<script>
(function(){
  const el = document.getElementById("donut_global");
  const chart = echarts.init(el, null, { renderer: 'canvas' });

  const labels = ["Agents de police", "ASVP", "Gardes champêtres", "Maîtres-chiens", "Chiens de police"];
  const values = [28170.0, 7864.0, 602.0, 483.0, 453.0];
  const total  = values.reduce((a,b)=>a+b, 0) || 1;
  const data   = labels.map((name,i)=>({ name, value: values[i] }));

  const option = {
    backgroundColor: 'transparent',
    tooltip: {
  tooltip: {
    trigger: 'item',
   formatter: (p) => `${p.name} : ${p.value} (${p.percent}%)`
  }
    },
    legend: {
      type: 'scroll',
      bottom: 0,
      textStyle: { color: '#dfe9e9' },
      itemWidth: 18, itemHeight: 12
    },
    series: [{
      name: 'Répartition des spécialités (100%)',
      type: 'pie',
      radius: ['45%','70%'],
      center: ['50%','45%'],
      avoidLabelOverlap: true,
      itemStyle: {
        borderRadius: 2,
        borderColor: '#0f1b24',
        borderWidth: 1
      },
      label: { show: false },
      emphasis: { label: { show: true, fontWeight: 'bold', color: '#dfe9e9' } },
      data: data,
      color: ["#7fd8d0", "#62c9c0", "#49b8af", "#3aa59f", "#2f8f89", "#2a7a75", "#256864", "#1f5856", "#174746", "#113a3a"]
    }]
  };

  chart.setOption(option);
  window.addEventListener('resize', ()=>chart.resize());
})();
</script>
</figure></div>

<section class="bloc">
  <h3>Totaux globaux</h3>
  <div class="table-wrap">
    <table class="counts">
      <thead><tr><th>Spécialité</th><th>Total des effectifs</th></tr></thead>
      <tbody>
        <tr><td>Agents de police</td><td>28170</td></tr><tr><td>ASVP</td><td>7864</td></tr><tr><td>Gardes champêtres</td><td>602</td></tr><tr><td>Maîtres-chiens</td><td>483</td></tr><tr><td>Chiens de police</td><td>453</td></tr>
      </tbody>
    </table>
  </div>
</section>

  </main>
  <footer class="footer"> De OUAMRANE Younes et CHAMOUAK Rayan </footer>
  <script>
    function toggleMenu(){
      document.getElementById('menu').classList.toggle('open');
      document.getElementById('overlay').classList.toggle('show');
    }
    function closeMenu(){
      document.getElementById('menu').classList.remove('open');
      document.getElementById('overlay').classList.remove('show');
    }
  </script>
</body>
</html>